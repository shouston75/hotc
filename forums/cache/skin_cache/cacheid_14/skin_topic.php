<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 14               */
/* CACHE FILE: Generated: Sun, 09 Dec 2012 17:06:50 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_topic_14 extends skinMaster{

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	parent::__construct( $registry );
	

$this->_funcHooks = array();
$this->_funcHooks['ajaxSharePost'] = array('shareLinksStrip','shareLinksJS');
$this->_funcHooks['announcement_show'] = array('canmanage','disablelightbox');
$this->_funcHooks['archiveStatusMessage'] = array('isAdminArchivedTop','isModArchived','isArchivedDone','isAdminArchived','isRestoring');
$this->_funcHooks['hookFacebookLike'] = array('checkAccess','fbAppIdPresent');
$this->_funcHooks['likeSummaryContents'] = array('likeOnlyMembers');
$this->_funcHooks['pollDisplay'] = array('lastVoter','poll_voters','hasVoters','viewVoters','votersJs','multiVote','showingResults','poll_choices','votedClass','noGuestVote','poll_questions','showPollResults','publicPollNotice','deleteVote','cast','viewVotersLink','alreadyDisplayVotes','displayVotes','youCreatedPoll','voteButtonVoted','voteButtonMid','voteButton','editPoll');
$this->_funcHooks['post'] = array('sDeleted','isSolvedCss','postQueued','noRep','posRep','negRep','repIgnored','userIgnoredLang','userIgnoredLangTwo','userIgnored','isNotIgnoring','postMid','hasPages','postModSelected','postModCheckbox','postMember','accessModCP','postAdmin','postIp','isSolvedSausage','repHighlight','postEditByReason','postEditBy','repButtonsLike','postSignature','canDelete','approveUnapprove','canEdit','controlsForUnapprovedPost','hideNormalControlsForUnapprovedPost','multiquote','replyButton','replyButtonWarn','canDelete','canHide','canEdit','postIsReported','canReportPost','reportedPostData','sDeletedNot','initIgnoredPost','adCodeCheck','sDeletedNotMQ');
$this->_funcHooks['quickEditPost'] = array('editReasonQe','editByQe');
$this->_funcHooks['show_attachment_title'] = array('attachType','attach');
$this->_funcHooks['Show_attachments'] = array('hasmime');
$this->_funcHooks['softDeletedPostBit'] = array('postMid','postModSelected','postModCheckbox','postMember','postAdmin','postIp','showReason','postEditByReason','postEditBy','postSignature','showPost','sdOptions');
$this->_funcHooks['topicViewTemplate'] = array('sDeleted','postQueued','reputation','noRep','posRep','negRep','repIgnored','userIgnoredLang','userIgnoredLangTwo','userIgnored','isNotIgnoring','postMid','postOnline','postMember','postAdmin','postIp','postModSelected','postModCheckbox','postIcon','repHighlight','repHighlight','postEditByReason','postEditBy','postSignature','hasNoRep','hasPosRep','hasNegRep','giveRepUp','giveRepDown','hasNotGivenRep','canRep','reputationBox','postIsReported','canReportPost','hasblog','multiquote','replyButton','canEdit','canDelete','approveUnapprove','approveUnapprove','approvePost','reportedPostData','sDeletedNot','initIgnoredPost','adCodeCheck','bottomNewTopic','bottomClosedButtonLink','bottomClosedButtonLink','pollOnly','bottomReplyButtonLink','bottomReplyButton','bottomIsClosed','endFirstPost','post_data','mm','mod_links','optRepFilterSelected','reputation_levels','auId','auEndId','lastActiveUser','active_users','allowRating','disablelightbox','showForumRulesInline','showForumRulesLink','tbdRestore','tbdRestore','topicHasBeenDeleted','newTopicButton','closedButtonLink','closedButtonLink','pollOnly','replyButtonLink','replyButton','closedButton','isWatching','watchWrapper','isNotThreadedMode','topicDescription','rate1','rate2','rate3','rate4','rate5','hasRates','youRated','jsHasRates','topicRating','weAreMod','startModForm','hasPosts','modButtonCount','showModOptionsinner','mmModOptions','showModOptions','modOptions','repFilterDefault','optSelectStar','repFilterOptions','reputationFilter','forumJumpInner','forumJump','threadedNewTopic','threadedClosedLink','threadedReplyLink','threadedReply','threadedClosed','threadedEnabled','canShare','finalNewTopic','finalClosedLink','finalClosedLink','pollOnly','finalReplyLink','finalReply','finalClosed','fastReply','auNames','topicActiveUsers','scrollToPost');


}

/* -- ajax__deletePost --*/
function ajax__deletePost() {
$IPBHTML = "";
$IPBHTML .= "<h3>{$this->lang->words['dlp_title']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<div class='ipsPad ipsForm_center'>
			{$this->lang->words['dlp_remove_from_view_desc']}<br />
			<span class='desc lighter ipsType_smaller'>{$this->lang->words['dlp_remove_from_view_extra']}</span><br /><br />
			<form action='#{removeUrl}' method='POST'>
				<input type='text' name='deleteReason' id='delPop_reason' value='' class='input_text' style='width: 60%' /> <input type='submit' class='input_submit' value='{$this->lang->words['post_hide']}' />
			</form>
		</div>
	</div>
</div>
<script type='text/javascript'>
$('delPop_reason').defaultize( \"{$this->lang->words['post_hide_reason_default']}\" );
</script>";
return $IPBHTML;
}

/* -- ajax__doDeletePost --*/
function ajax__doDeletePost() {
$IPBHTML = "";
$IPBHTML .= "<h3>{$this->lang->words['post_delete']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<div class='ipsPad ipsForm_center'>
			{$this->lang->words['post_delete_confirm']}<br />
			<br />
			<form action='#{permaUrl}' method='POST'>
				<input type='submit' class='input_submit' id='delPush' value='{$this->lang->words['post_delete']}' />
			</form>
		</div>
	</div>
</div>";
return $IPBHTML;
}

/* -- ajax__restoreTopicDialog --*/
function ajax__restoreTopicDialog() {
$IPBHTML = "";
$IPBHTML .= "<h3>{$this->lang->words['drestore_title']}</h3>
<div class='ipsBox'>
	<div class='ipsBox_container ipsPad'>
		{$this->lang->words['drestore_text']}
		<br />
		<br />
		<a href='#' class='ipsButton_secondary important' data-clicklaunch=\"restoreTopicDialogGo\" data-scope=\"topic\">{$this->lang->words['drestore_title']}</a>
	</div>
</div>";
return $IPBHTML;
}

/* -- ajaxSharePost --*/
function ajaxSharePost($topic, $post, $url, $sharelinks) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['ajaxSharePost'] ) )
{
$count_201ec3b4a76ea26fc529d45054cb62ef = is_array($this->functionData['ajaxSharePost']) ? count($this->functionData['ajaxSharePost']) : 0;
$this->functionData['ajaxSharePost'][$count_201ec3b4a76ea26fc529d45054cb62ef]['topic'] = $topic;
$this->functionData['ajaxSharePost'][$count_201ec3b4a76ea26fc529d45054cb62ef]['post'] = $post;
$this->functionData['ajaxSharePost'][$count_201ec3b4a76ea26fc529d45054cb62ef]['url'] = $url;
$this->functionData['ajaxSharePost'][$count_201ec3b4a76ea26fc529d45054cb62ef]['sharelinks'] = $sharelinks;
}
$IPBHTML .= "<h3>" . sprintf( $this->lang->words['share_post'], $post['post_count'] ) . "</h3>
<div class='ipsBox'>
	<div class='ipsBox_container'>
		<div class='ipsPad ipsForm_center'>
			<input type='text' class='input_text' id='postShareUrl' value='$url' />
			" . (($sharelinks) ? ("
				<div id='postShareStrip'>{$sharelinks}</div>
			") : ("")) . "
		</div>
	</div>
</div>
<script type=\"text/javascript\">
" . (($sharelinks) ? ("						
	FB.XFBML.parse();
	gapi.plusone.go();
") : ("")) . "
	$('postShareUrl').on('click', function(e) { $('postShareUrl').focus(); $('postShareUrl').select(); } );
</script>";
return $IPBHTML;
}

/* -- ajaxSigCloseMenu --*/
function ajaxSigCloseMenu($post) {
$IPBHTML = "";
$IPBHTML .= "<ul class='ipbmenu_content'>
	<li class='clearfix'>
		<a href='#' data-clicklaunch='ignoreUsersSig' data-scope='ipb.topic' data-id=\"{$post['member_id']}\">" . sprintf( $this->lang->words['ignore_userx_signature'], $post['members_display_name'] ) . "</a>
	</li>
	<li class='clearfix'>
		<a href='#' data-clicklaunch='ignoreUsersSig' data-scope='ipb.topic' data-id=\"all\">{$this->lang->words['ignore_all_signatures']}</a>
	</li>
</ul>";
return $IPBHTML;
}

/* -- announcement_show --*/
function announcement_show($announce="",$author="") {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['announcement_show'] ) )
{
$count_c16d84c15d38e6caaf7a2be525927fb2 = is_array($this->functionData['announcement_show']) ? count($this->functionData['announcement_show']) : 0;
$this->functionData['announcement_show'][$count_c16d84c15d38e6caaf7a2be525927fb2]['announce'] = $announce;
$this->functionData['announcement_show'][$count_c16d84c15d38e6caaf7a2be525927fb2]['author'] = $author;
}
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "
<h1 class='ipsType_pagetitle'>{$this->lang->words['announce_title']}: {$announce['announce_title']}</h1>
<br />
<h2 class='maintitle'>{$this->lang->words['posted_by']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($author) : '' ) . "</h2>
<div class='post_block first hentry announcement' id='announce_id_{$announce['announce_id']}'>
	<div class='post_wrap'>
		<br />
		<div class='author_info'>
			" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userInfoPane' ) ? $this->registry->getClass('output')->getTemplate('global')->userInfoPane($author, 'announcement', array( 'id2' => $announce['announce_id'] )) : '' ) . "
		</div>
		<div class='post_body'>
			<div class='post entry-content'>
				{$announce['announce_post']}
			</div>
			<ul class='post_controls clear clearfix'>
				" . (($this->memberData['g_is_supmod'] == 1) ? ("
					<li class='post_edit'><a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=modcp&amp;tab=announcements&amp;fromapp=forums&amp;_do=edit&amp;announce_id={$announce['announce_id']}", "public",'' ), "", "" ) . "' title='{$this->lang->words['post_edit_announce']}' class='edit_post'>{$this->lang->words['post_edit_announce']}</a></li>
				") : ("")) . "
			</ul>
		</div>
	</div>
</div>
" . ((!$this->settings['disable_lightbox']) ? ("
" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'include_lightbox' ) ? $this->registry->getClass('output')->getTemplate('global')->include_lightbox() : '' ) . "
") : ("")) . "
" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'include_highlighter' ) ? $this->registry->getClass('output')->getTemplate('global')->include_highlighter(1) : '' ) . "";
return $IPBHTML;
}

/* -- archiveStatusMessage --*/
function archiveStatusMessage($topic, $forum) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['archiveStatusMessage'] ) )
{
$count_471f389700c5aa800366edecdf3c009b = is_array($this->functionData['archiveStatusMessage']) ? count($this->functionData['archiveStatusMessage']) : 0;
$this->functionData['archiveStatusMessage'][$count_471f389700c5aa800366edecdf3c009b]['topic'] = $topic;
$this->functionData['archiveStatusMessage'][$count_471f389700c5aa800366edecdf3c009b]['forum'] = $forum;
}
$IPBHTML .= "" . (($this->registry->class_forums->fetchArchiveTopicType($topic) == 'restore') ? ("<div class='message unspecific'>
		" . (($this->memberData['g_access_cp']) ? ("{$this->lang->words['top_archived_topic_restore']}") : ("{$this->lang->words['top_archived_topic']}")) . "
	</div>") : ("<div class='message unspecific'>
		{$this->lang->words['top_archived_topic']}
		" . (($this->memberData['is_mod']) ? ("{$this->lang->words['top_archived_topic_mod']}") : ("")) . "
		" . (($this->memberData['g_access_cp']) ? ("<br />
			" . (($this->registry->class_forums->fetchArchiveTopicType( $topic ) == 'archived') ? ("
				<a href='#' class='ipsButton_secondary' data-clicklaunch=\"restoreTopicDialog\" data-scope=\"topic\">{$this->lang->words['top_archived_topic_admin']}</a>
				<a href='#' class='ipsButton_secondary important' data-clicklaunch=\"deleteTopicDialog\" data-scope=\"topic\">{$this->lang->words['tarchived_delete']}</a>
			") : ("")) . "") : ("")) . "
	</div>")) . "";
return $IPBHTML;
}

/* -- hookFacebookLike --*/
function hookFacebookLike() {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['hookFacebookLike'] ) )
{
$count_19711d00a14b6ce7948c43ffb72df5d9 = is_array($this->functionData['hookFacebookLike']) ? count($this->functionData['hookFacebookLike']) : 0;
}
$IPBHTML .= "" . (($this->settings['fbc_appid']) ? ("" . (($this->registry->getClass('class_forums')->guestCanSeeTopic($this->request['f'], $this->settings['fbc_bot_group'])) ? ("
<br />
<div class='left facebook-like'>
	<fb:like href=\"{$this->registry->getClass('output')->fetchRootDocUrl()}\" layout=\"standard\" show_faces=\"false\" width=\"450\" action=\"like\" colorscheme=\"light\" />
</div>
<div id=\"fb-root\"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({appId: '{$this->settings['fbc_appid']}', status: true, cookie: true,
             xfbml: true});
  };
  (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
      '//connect.facebook.net/{$this->settings['fb_locale']}/all.js';
    document.getElementById('fb-root').appendChild(e);
  }());
</script>
") : ("")) . "") : ("")) . "";
return $IPBHTML;
}

/* -- likeSummary --*/
function likeSummary($data, $relId, $opts) {
$IPBHTML = "";
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("like", "0" ) . "
<div class='__like right' data-app=\"{$data['app']}\" data-area=\"{$data['area']}\" data-relid=\"{$relId}\" data-isfave=\"{$data['iLike']}\">
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('topic'), 'likeSummaryContents' ) ? $this->registry->getClass('output')->getTemplate('topic')->likeSummaryContents($data, $relId, $opts) : '' ) . "
</div>
<script type=\"text/javascript\">
	var FAVE_TEMPLATE = new Template( \"<h3>" . sprintf( $this->lang->words['unset_fave_title'], $this->lang->words['like_ucfirst_un' . $data['vernacular'] ]) . "</h3><div class='ipsPad'><span class='desc'>" . sprintf( $this->lang->words['unset_fave_words'], $this->lang->words['like_un' . $data['vernacular'] ]) . "</span><br /><p class='ipsForm_center'><input type='button' value='" . sprintf( $this->lang->words['unset_button'], $this->lang->words['like_ucfirst_un' . $data['vernacular'] ]) . "' class='input_submit _funset' /></p></div>\");
</script>";
return $IPBHTML;
}

/* -- likeSummaryContents --*/
function likeSummaryContents($data, $relId, $opts=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['likeSummaryContents'] ) )
{
$count_d5e3709560b6c127ed0fc5f7e5c2a0f3 = is_array($this->functionData['likeSummaryContents']) ? count($this->functionData['likeSummaryContents']) : 0;
$this->functionData['likeSummaryContents'][$count_d5e3709560b6c127ed0fc5f7e5c2a0f3]['data'] = $data;
$this->functionData['likeSummaryContents'][$count_d5e3709560b6c127ed0fc5f7e5c2a0f3]['relId'] = $relId;
$this->functionData['likeSummaryContents'][$count_d5e3709560b6c127ed0fc5f7e5c2a0f3]['opts'] = $opts;
}
$IPBHTML .= "<span class='ipsButton_extra right " . (($data['totalCount']) ? ("_fmore clickable") : ("")) . "' title='" . sprintf( $this->lang->words['like_totalcount_' . $data['vernacular'] ], $data['totalCount'] ) . "' data-tooltip=\"" . sprintf( $this->lang->words['like_totalcount_' . $data['vernacular'] ], $data['totalCount'] ) . "\"><img src='{$this->settings['img_url']}/icon_users.png' /> <strong>{$data['totalCount']}</strong></span>
" . (($this->memberData['member_id']) ? ("<a href='#' title=\"" . (($data['iLike']) ? ("" . sprintf( $this->lang->words['fave_tt_on'], $this->lang->words['like_ucfirst_un' . $data['vernacular'] ]) . "") : ("" . sprintf( $this->lang->words['fave_tt_off'], $this->lang->words['like_ucfirst_' . $data['vernacular'] ]) . "")) . "\" class='ftoggle ipsButton_secondary'>" . (($data['iLike']) ? ("" . sprintf( $this->lang->words['unset_fave_button'], $this->lang->words['like_ucfirst_un' . $data['vernacular'] ]) . "") : ("" . sprintf( $this->lang->words['set_fave_button'], $this->lang->words['like_ucfirst_' . $data['vernacular'] ]) . "")) . "</a>") : ("")) . "";
return $IPBHTML;
}

/* -- pollDisplay --*/
function pollDisplay($poll, $topicData, $forumData, $pollData, $showResults, $editPoll=1) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['pollDisplay'] ) )
{
$count_b8a14c864cf25c20a750e5d6e93c5ab9 = is_array($this->functionData['pollDisplay']) ? count($this->functionData['pollDisplay']) : 0;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['poll'] = $poll;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['topicData'] = $topicData;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['forumData'] = $forumData;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['pollData'] = $pollData;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['showResults'] = $showResults;
$this->functionData['pollDisplay'][$count_b8a14c864cf25c20a750e5d6e93c5ab9]['editPoll'] = $editPoll;
}
$IPBHTML .= "<script type='text/javascript'>
//<![CDATA[
	ipb.templates['poll_voters'] = new Template(\"<h3 class='bar'>{$this->lang->words['poll_voted_for']} #{title}</h3><div class='ipsPad'>#{content}</div>\");
//]]>
</script>
<div class='general_box alt poll' id='poll_{$poll['pid']}'>
	<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=vote&amp;t={$topicData['tid']}&amp;page={$this->request['page']}&amp;do=add&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "\" name='pollForm' method=\"post\">
		<h3>{$this->lang->words['poll']} {$poll['poll_question']}" . (($showResults) ? (" <span class='desc'>({$poll['_totalVotes']} {$this->lang->words['poll_vote_casted']})</span>") : ("")) . "</h3>
		" . (($this->settings['poll_allow_public'] AND $poll['poll_view_voters'] AND ! $showResults) ? ("
			<div class='message unspecified'>{$this->lang->words['poll_public_notice']}</div>
		") : ("")) . "
		".$this->__f__8a4eb058f5749711e7595519a81962e5($poll,$topicData,$forumData,$pollData,$showResults,$editPoll)."		<fieldset class='submit'>
			<legend>{$this->lang->words['poll_vote']}</legend>
			" . (($topicData['state'] != 'closed') ? ("" . (($this->memberData['member_id']) ? ("" . (($poll['_memberVoted']) ? ("" . (($this->settings['poll_allow_vdelete'] OR $this->memberData['g_is_supmod']) ? ("
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=vote&amp;t={$topicData['tid']}&amp;page={$this->request['page']}&amp;do=delete&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' title='{$this->lang->words['poll_delete_vote']}' id='poll_deletevote' class='input_submit alt'>{$this->lang->words['poll_delete_vote']}</a>
						") : ("
							{$this->lang->words['poll_you_voted']}
						")) . "") : ("" . ((($poll['starter_id'] == $this->memberData['member_id']) and ($this->settings['allow_creator_vote'] != 1)) ? ("
							{$this->lang->words['poll_you_created']}
						") : ("<!-- VOTE Button -->
							" . (($this->request['mode'] != 'show') ? ("
								<input class='input_submit' type=\"submit\" name=\"submit\" value=\"{$this->lang->words['poll_add_vote']}\" title=\"{$this->lang->words['tt_poll_vote']}\" />
							") : ("")) . "
							<!-- SHOW Button -->
							" . (($this->settings['allow_result_view'] == 1) ? ("" . (($this->request['mode'] == 'show') ? ("" . ((! $poll_view_voters) ? ("
										<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topicData['tid']}&amp;page={$this->request['page']}", "public",'' ), "{$topicData['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['tt_poll_svote']}' id='poll_nullvote' class='input_submit alt'>{$this->lang->words['pl_show_vote']}</a>
									") : ("")) . "") : ("
									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topicData['tid']}&amp;mode=show&amp;page={$this->request['page']}", "public",'' ), "{$topicData['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['tt_poll_show']}' id='poll_showresults' class='input_submit alt'>{$this->lang->words['pl_show_results']}</a>
								")) . "") : ("
								<input class='input_submit' type=\"submit\" name=\"nullvote\" value=\"{$this->lang->words['poll_null_vote']}\" title=\"{$this->lang->words['tt_poll_null']}\" />
							")) . "")) . "")) . "") : ("
					{$this->lang->words['poll_no_guests']}
				")) . "") : ("")) . "
			" . (($editPoll) ? ("
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=post&amp;section=post&amp;do=edit_post&amp;f={$poll['forum_id']}&amp;t={$poll['tid']}&amp;p={$topicData['topic_firstpost']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['poll_edit']}' class='input_submit alt' >{$this->lang->words['poll_edit']}</a>
			") : ("")) . "
		</fieldset>
	</form>
</div>";
return $IPBHTML;
}


function __f__255c76c6321470d8fdcb7a10235f90c6($poll, $topicData, $forumData, $pollData, $showResults, $editPoll=1,$questionID='',$questionData='',$choiceID='',$choiceData='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $choiceData['voters'] as $id => $member )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
												users += \"<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$member['member_id']}", "public",'' ), "{$member['members_seo_name']}", "showuser" ) . "'>{$member['members_colored_name']}</a>" . (($member['_last'] == 0) ? (", ") : ("")) . "\";
											
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__945e4626d0fabdab9a2b8c8c6f1439ae($poll, $topicData, $forumData, $pollData, $showResults, $editPoll=1,$questionID='',$questionData='')
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $pollData[ $questionID ]['choices'] as $choiceID => $choiceData )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							" . (($showResults) ? ("<li>
									<span class='answer'>" . ((is_array( $choiceData['voters'] ) AND in_array( $this->memberData['member_id'], array_keys( $choiceData['voters'] ) )) ? (" " . $this->registry->getClass('output')->getReplacement("your_vote") . " ") : ("")) . "{$choiceData['choice']}</span>
									" . (($poll['poll_view_voters'] AND is_array( $choiceData['voters'] ) AND $this->settings['poll_allow_public'] AND $choiceData['votes']) ? ("
										<a href='#' class='votes' id='l_voters_{$questionID}_{$choiceID}' title='{$this->lang->words['poll_view_voters']}'>({$choiceData['votes']} {$this->lang->words['poll_votes']} [{$choiceData['percent']}%] - <strong>{$this->lang->words['poll_view']}</strong>)</a>
									") : ("
										<span class='votes'> ({$choiceData['votes']} {$this->lang->words['poll_votes']} [{$choiceData['percent']}%])</span>
									")) . "
									" . (($poll['poll_view_voters'] AND is_array( $choiceData['voters'] ) AND $this->settings['poll_allow_public'] AND $choiceData['votes']) ? ("
										<script type='text/javascript'>
											$('l_voters_{$questionID}_{$choiceID}').observe('click', ipb.topic.showVoters.bindAsEventListener( this, {$questionID}, {$choiceID} ) );
											if( Object.isUndefined( ipb.topic.poll[ $questionID ] ) ){
												ipb.topic.poll[ $questionID ] = [];
											}
											
											var users = \"\";
											
											".$this->__f__255c76c6321470d8fdcb7a10235f90c6($poll,$topicData,$forumData,$pollData,$showResults,$editPoll,$questionID,$questionData,$choiceID,$choiceData)."											ipb.topic.poll[ $questionID ][ $choiceID ] = { name: \"{$choiceData['choice']}\", users: users};
										</script>
									") : ("")) . "
									<p class='progress_bar topic_poll' title='{$this->lang->words['poll_percent_of_vote']} {$choiceData['percent']}%'>
										<span style='width: {$choiceData['percent']}%'><span>{$this->lang->words['poll_percent_of_vote']} {$choiceData['percent']}%</span></span>
									</p>
								</li>") : ("" . (($choiceData['type'] == 'multi') ? ("
									<li><input type='checkbox' id='choice_{$questionID}_{$choiceID}' name='choice_{$questionID}_{$choiceID}' value='1' class='input_check' /> <label for='choice_{$questionID}_{$choiceID}'>{$choiceData['choice']}</label></li>
								") : ("
									<li><input type='radio' name='choice[{$questionID}]' id='choice_{$questionID}_{$choiceID}' class='input_radio' value='{$choiceID}' /> <label for='choice_{$questionID}_{$choiceID}'>{$choiceData['choice']}</label></li>
								")) . "")) . "
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__8a4eb058f5749711e7595519a81962e5($poll, $topicData, $forumData, $pollData, $showResults, $editPoll=1)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $pollData as $questionID => $questionData )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			<div class='poll_question" . (($showResults) ? (" voted") : ("")) . "'>
				<h4 class='rounded'>{$pollData[ $questionID ]['question']}</h4>
				" . ((! $this->settings['allow_result_view'] AND ! $this->memberData['member_id']) ? ("
					{$this->lang->words['poll_noview_guest']}
				") : ("
					<ol>
						".$this->__f__945e4626d0fabdab9a2b8c8c6f1439ae($poll,$topicData,$forumData,$pollData,$showResults,$editPoll,$questionID,$questionData)."					</ol>
				")) . "
			</div>
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- post --*/
function post($post, $displayData, $topic, $forum=array()) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['post'] ) )
{
$count_49c9d87dda58b4bbc50e054c1751b153 = is_array($this->functionData['post']) ? count($this->functionData['post']) : 0;
$this->functionData['post'][$count_49c9d87dda58b4bbc50e054c1751b153]['post'] = $post;
$this->functionData['post'][$count_49c9d87dda58b4bbc50e054c1751b153]['displayData'] = $displayData;
$this->functionData['post'][$count_49c9d87dda58b4bbc50e054c1751b153]['topic'] = $topic;
$this->functionData['post'][$count_49c9d87dda58b4bbc50e054c1751b153]['forum'] = $forum;
}
$IPBHTML .= "<!--post:{$post['post']['pid']}-->
" . (($post['post']['_isDeleted'] AND $post['post']['_softDeleteSee']) ? ("
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('topic'), 'softDeletedPostBit' ) ? $this->registry->getClass('output')->getTemplate('topic')->softDeletedPostBit($post, $displayData['sdData'], $topic) : '' ) . "
") : ("")) . "
" . ((! $post['post']['_isDeleted']) ? ("<div class='post_block hentry clear clearfix " . (($post['post']['_isMarkedAnswered']) ? ("solved") : ("")) . " " . (($post['post']['_isHidden']) ? ("moderated") : ("")) . "' id='post_id_{$post['post']['pid']}'>
		<a id='entry{$post['post']['pid']}'></a>
		" . ((!empty( $post['post']['_repignored'] ) AND $post['post']['_repignored'] == 1 && $post['post']['_ignored'] != 1) ? ("<div class='post_ignore'>
				" . (($post['post']['rep_points'] == 0) ? ("
					<span class='reputation zero' title='{$this->lang->words['top_rep']}'>
				") : ("")) . "
				" . (($post['post']['rep_points'] > 0) ? ("
					<span class='reputation positive' title='{$this->lang->words['top_rep']}'>
				") : ("")) . "
				" . (($post['post']['rep_points'] < 0) ? ("
					<span class='reputation negative' title='{$this->lang->words['top_rep']}' >
				") : ("")) . "
						{$post['post']['rep_points']}</span> {$this->lang->words['top_this_post_by']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . " {$this->lang->words['top_below_thresh']}. <a href='#' title='{$this->lang->words['ignore_view_post']}' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
			</div>") : ("")) . "
	
		" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("<div class='post_ignore'>
				" . (($post['post']['_repignored'] == 1) ? ("{$this->lang->words['post_ignored_rep']}") : ("{$this->lang->words['post_ignored']}")) . " " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . ". <a href='#entry{$post['post']['pid']}' title='{$this->lang->words['ignore_view_post']}' style='display: none' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
				" . (($this->settings['reputation_enabled'] AND $post['post']['_repignored'] == 1) ? ("<div><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}&amp;page={$this->request['page']}&amp;rep_filter_set=*&amp;rep_filter=update&amp;secure_key={$this->member->form_hash}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "\">{$this->lang->words['post_ignore_reset_rep']}</a></div>") : ("")) . "
			</div>") : ("")) . "
		<div class='post_wrap' " . (($post['post']['_ignored'] == 1 || $post['post']['_repignored'] == 1) ? ("style='display: none'") : ("")) . ">
			" . (($post['author']['member_id']) ? ("
				<h3 class='row2'>
			") : ("
				<h3 class='guest row2'>
			")) . "
				<span class='post_id right ipsType_small desc blend_links'>
					" . (($this->request['page']) ? ("
						<a itemprop=\"replyToUrl\" data-entry-pid='{$post['post']['pid']}' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}&amp;page={$this->request['page']}{$post['post']['PermalinkUrlBit']}#entry{$post['post']['pid']}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$topic['title']}{$this->lang->words['link_to_post']} #{$post['post']['post_count']}'>
					") : ("
						<a itemprop=\"replyToUrl\" data-entry-pid='{$post['post']['pid']}' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}{$post['post']['PermalinkUrlBit']}#entry{$post['post']['pid']}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$topic['title']}{$this->lang->words['link_to_post']} #{$post['post']['post_count']}'>
					")) . "
					#{$post['post']['post_count']}
					<img src='{$this->settings['img_url']}/icon_share.png' class='small' title='{$topic['title']}{$this->lang->words['link_to_post']} #{$post['post']['post_count']}' />
					</a>
				</span>
				" . (($post['post']['moddable'] && ! $topic['_isArchived']) ? ("<span class='right'>
						<label for='checkbox_{$post['post']['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$post['post']['pid']}' name='selectedpids[]' value='{$post['post']['pid']}' class='post_mod right'" . ((!empty( $post['post']['_pid_selected'] )) ? (" checked='checked'") : ("")) . " data-status='{$post['post']['queued']}' />
					</span>") : ("")) . "
				" . (($post['author']['member_id']) ? ("
					<span itemprop=\"creator name\" class=\"author vcard\">" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . "</span>
				") : ("
					" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . "
				")) . "
			
				" . (($post['post']['_show_ip']) ? ("<span class='ip right ipsType_small'>({$this->lang->words['ip']}:
					" . (($post['author']['g_access_cp']) ? ("
						<em>{$this->lang->words['ip_private']}</em>
					") : ("" . (($this->memberData['g_is_supmod']) ? ("<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=modcp&amp;fromapp=members&amp;tab=iplookup&amp;ip={$post['post']['ip_address']}", "public",'' ), "", "" ) . "\" title='{$this->lang->words['info_about_this_ip']}'>{$post['post']['ip_address']}</a>") : ("{$post['post']['ip_address']}")) . "")) . ")
					</span>") : ("")) . "
			</h3>
			<div class='author_info'>
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userInfoPane' ) ? $this->registry->getClass('output')->getTemplate('global')->userInfoPane($post['author'], $post['post']['pid'], array( 'isTopicView' => true, 'wl_id' => $post['post']['wl_id'] )) : '' ) . "
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					{$this->lang->words['posted']} <abbr class=\"published\" itemprop=\"commentTime\" title=\"" . date( 'c', $post['post']['post_date'] ) . "\">" . $this->registry->getClass('class_localization')->getDate($post['post']['post_date'],"long", 0) . "</abbr>
					" . (($post['post']['_isMarkedAnswered']) ? ("&nbsp; <span class='ipsBadge ipsBadge_green'>{$this->lang->words['topic_best_answer']}</span>") : ("")) . "
				</p>
				" . (($this->settings['reputation_highlight'] AND $post['post']['rep_points'] >= $this->settings['reputation_highlight']) ? ("
					<p class='rep_highlight'>" . $this->registry->getClass('output')->getReplacement("popular_post") . "<br />{$this->lang->words['popular_post']}</p>
				") : ("")) . "
				<div itemprop=\"commentText\" class='post entry-content " . (($post['post']['_repignored'] == 1) ? ("imgsize_ignore") : ("")) . "'>
					{$post['post']['post']}
					{$post['post']['attachmentHtml']}
					<br />
					" . (($post['post']['edit_by']) ? ("<p class='edit'>
							{$post['post']['edit_by']}
							" . (($post['post']['post_edit_reason'] != '') ? ("
								<br />
								<span class='reason'>{$post['post']['post_edit_reason']}</span>
							") : ("")) . "
						</p>") : ("")) . "
				</div>
				
				" . ((! $topic['_isArchived']) ? ("
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('global_other'), 'repButtons' ) ? $this->registry->getClass('output')->getTemplate('global_other')->repButtons($post['author'], array_merge( array( 'primaryId' => $post['post']['pid'], 'domLikeStripId' => 'like_post_' . $post['post']['pid'], 'domCountId' => 'rep_post_' . $post['post']['pid'], 'app' => 'forums', 'type' => 'pid', 'likeFormatted' => $post['post']['like']['formatted'] ), $post['post'] )) : '' ) . "
				") : ("")) . "
								
				<!--hook.if.skin_topic.post.postSignature.pre.startif-->" . (($post['post']['signature']) ? ("
					{$post['post']['signature']}
				") : ("")) . "
				
				" . (($this->memberData['is_mod'] && ! $topic['_isArchived'] && $post['post']['queued']) ? ("<ul id='postControlsUnapproved_{$post['post']['pid']}' class='post_controls clear clearfix'>
						" . (($post['post']['_can_delete'] === TRUE && ! $topic['_isArchived']) ? ("
							<li class='post_del'>
								<a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=deletedo&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;selectedpids[]={$post['post']['pid']}&amp;page={$this->request['page']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_delete_title']}' onclick='if( !confirm(\"{$this->lang->words['post_delete_confirm']}\") ){ return false; }' >{$this->lang->words['post_delete']}</a>
							</li>
						") : ("")) . "
						<li class='post_toggle toggle_post' id='toggle_post_{$post['post']['pid']}' style='display: none'>
							<a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=" . ((!$post['post']['queued']) ? ("unapprove") : ("approve")) . "&amp;selectedpids[{$post['post']['pid']}]={$post['post']['pid']}&amp;t={$topic['tid']}&amp;f={$forum['id']}&amp;auth_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' title='{$this->lang->words['post_toggle_visible']}'><span id='toggletext_post_{$post['post']['pid']}'>" . (($post['post']['queued']==1) ? ("{$this->lang->words['post_approve']}") : ("{$this->lang->words['post_unapprove']}")) . "</span></a>
						</li>
						" . (($post['post']['_can_edit'] === TRUE) ? ("
							<li class='post_edit'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=edit_post&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;page={$this->request['page']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_edit_title']}' class='ipsButton_secondary edit_post' id='edit_post_{$post['post']['pid']}'>{$this->lang->words['post_edit']}</a></li>
						") : ("")) . "
					</ul>") : ("")) . "
			
				<ul id='postControlsNormal_{$post['post']['pid']}' class='post_controls clear clearfix' " . (($this->memberData['is_mod'] && ! $topic['_isArchived'] && $post['post']['queued']) ? ("style='display:none'") : ("")) . ">
					<li class='top hide'><a href='#ipboard_body' class='top' title='{$this->lang->words['back_top']}'>{$this->lang->words['back_top']}</a></li>
					" . (($topic['Perms']['canAnswerTopic'] && $post['post']['post_count'] > 1) ? ("" . (($post['post']['_isMarkedAnswered']) ? ("" . (($post['post']['_canMarkUnanswered']) ? ("
								<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=extras&amp;section=answer&amp;do=unanswer&amp;t={$this->request['t']}&amp;pid={$post['post']['pid']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "\"  data-post-button=\"unanswer\" class='ipsButton_secondary important' data-pid=\"{$post['post']['pid']}\"><img class='icon' src=\"{$this->settings['img_url']}/cross_white_10px.png\">{$this->lang->words['topic_mark_unsolved']}</a></li>
							") : ("")) . "") : ("" . (($post['post']['_canAnswer'] && $topic['topic_firstpost'] != $post['post']['pid']) ? ("
								<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=extras&amp;section=answer&amp;do=answer&amp;t={$this->request['t']}&amp;pid={$post['post']['pid']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "\"  data-post-button=\"answer\" class='ipsButton_secondary' data-pid=\"{$post['post']['pid']}\"><img class='icon' src=\"{$this->settings['img_url']}/tick_10px.png\">{$this->lang->words['topic_mark_solved']}</a></li>
							") : ("")) . "")) . "") : ("")) . "
					" . ((!$this->memberData['unacknowledged_warnings'] && !$this->memberData['restrict_post']) ? ("" . (($post['post']['_canReply']) ? ("<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", "publicWithApp",'' ), "", "" ) . "\"  class='_ips_trigger_quote ipsButton_secondary' pid=\"{$post['post']['pid']}\" title=\"{$this->lang->words['tt_reply_to_post']}\">{$this->lang->words['post_reply']}</a></li>
							" . ((!empty( $post['post']['_mq_selected'] )) ? ("
								<li class='selected multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
							") : ("
								<li class='multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
							")) . "
								<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", "publicWithApp",'' ), "", "" ) . "\" title=\"{$this->lang->words['quote_with_mq']}\" class='ipsButton_secondary'>{$this->lang->words['mq']}</a>
							</li>") : ("")) . "") : ("")) . "
					" . (($post['post']['_can_delete'] === TRUE && ! $topic['_isArchived']) ? ("
						<li id='del_post_{$post['post']['pid']}' class='post_del'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=deletedo&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;selectedpids[]={$post['post']['pid']}&amp;page={$this->request['page']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_delete_title']}' class='delete_post' onclick='return false;' >{$this->lang->words['post_delete']}</a>
						</li>
					") : ("")) . "
					" . (($post['post']['_softDelete'] && ! $topic['_isArchived']) ? ("
						<li id='hide_post_{$post['post']['pid']}'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=delete&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;selectedpids[]={$post['post']['pid']}&amp;page={$this->request['page']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "' class='hide_post'>{$this->lang->words['post_hide']}</a>
						</li>
					") : ("")) . "
					" . (($post['post']['_can_edit'] === TRUE) ? ("
						<li class='post_edit'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=edit_post&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;page={$this->request['page']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_edit_title']}' class='edit_post' id='edit_post_{$post['post']['pid']}'>{$this->lang->words['post_edit']}</a></li>
					") : ("")) . "
					" . (($topic['_canReport'] and ! $topic['_isArchived']) ? ("<li class='report'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;rcom=post&amp;tid={$this->request['t']}&amp;pid={$post['post']['pid']}&amp;page={$this->request['page']}", "public",'' ), "", "" ) . "'>{$this->lang->words['report']}</a>
						</li>
						" . (($this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
							<li class='report'>
								<a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\" id='post-report-{$post['post']['pid']}' class='ipbmenu'> <span id=\"rstat-{$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}\"><img src=\"{$this->settings['img_url']}/reports/post_alert_{$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['gfx']}.png\" alt=\"\" /></span> </a>
							</li>
						") : ("")) . "") : ("")) . "
				</ul>
				" . ((! $topic['_isArchived'] AND $this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
					<ul id='post-report-{$post['post']['pid']}_menucontent' class='ipbmenu_content report_menu'>
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}", "public",'' ), "", "" ) . "\" id='report_mark_{$post['post']['pid']}'><img src='{$this->settings['img_url']}/reports/mark_complete.png' alt='' /> {$this->lang->words['report_menu_mark_complete']}</a></li>
						<li><a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\"><img src='{$this->settings['img_url']}/reports/view_report.png' alt='' /> {$this->lang->words['report_menu_view_report']}</a></li>
					</ul>
					<script type=\"text/javascript\">
						$('report_mark_{$post['post']['pid']}').observe('click',
						 	ipb.global.updateReportStatus.bindAsEventListener( 	
								this, {$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']},2,2
							)
						);
					</script>
				") : ("")) . "	
			</div>
		</div>
	</div>") : ("")) . "
		
		" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("
			<script type='text/javascript'>
				ipb.topic.setPostHidden( {$post['post']['pid']} );
				$('unhide_post_{$post['post']['pid']}').show();
			</script>
		") : ("")) . "
		<hr />
		
		" . (($post['post']['_adCode']) ? ("
			{$post['post']['_adCode']}
		") : ("")) . "
<script type=\"text/javascript\">
var pid = parseInt({$post['post']['pid']});
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}
" . ((! $post['post']['_isDeleted']) ? ("
	// Show multiquote for JS browsers
	if ( $('multiq_{$post['post']['pid']}') )
	{
		$('multiq_{$post['post']['pid']}').show();
	}
	
	if( $('toggle_post_{$post['post']['pid']}') )
	{
		$('toggle_post_{$post['post']['pid']}').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[{$post['post']['pid']}] = { 'canDelete' : " . intval($post['post']['_can_delete']) . ", 'canSoftDelete' : " . intval($post['post']['_softDelete']) . " };
") : ("")) . "
</script>";
return $IPBHTML;
}

/* -- quickEditPost --*/
function quickEditPost($post) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['quickEditPost'] ) )
{
$count_bf850018ae203360d4c3726727fe730f = is_array($this->functionData['quickEditPost']) ? count($this->functionData['quickEditPost']) : 0;
$this->functionData['quickEditPost'][$count_bf850018ae203360d4c3726727fe730f]['post'] = $post;
}
$IPBHTML .= "{$post['post']}
    {$post['attachmentHtml']}
	<br />
	" . (($post['edit_by']) ? ("<p class='edit'>
			{$post['edit_by']}
			" . (($post['post_edit_reason'] != '') ? ("
				<br />
				<span class='reason'>{$post['post_edit_reason']}</span>
			") : ("")) . "
		</p>") : ("")) . "";
return $IPBHTML;
}

/* -- show_attachment_title --*/
function show_attachment_title($title="",$data="",$type="") {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['show_attachment_title'] ) )
{
$count_65676671c8c5d6526b2b2325b1dc439a = is_array($this->functionData['show_attachment_title']) ? count($this->functionData['show_attachment_title']) : 0;
$this->functionData['show_attachment_title'][$count_65676671c8c5d6526b2b2325b1dc439a]['title'] = $title;
$this->functionData['show_attachment_title'][$count_65676671c8c5d6526b2b2325b1dc439a]['data'] = $data;
$this->functionData['show_attachment_title'][$count_65676671c8c5d6526b2b2325b1dc439a]['type'] = $type;
}
$IPBHTML .= "<div id='attach_wrap' class='clearfix'>
	<h4>{$title}</h4>
	<ul>
		".$this->__f__640d36b41078f9795b7838de6b2acb19($title,$data,$type)."	</ul>
</div>";
return $IPBHTML;
}


function __f__640d36b41078f9795b7838de6b2acb19($title="",$data="",$type="")
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $data as $file )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
			<li class='" . (($type == 'attach') ? ("attachment") : ("")) . "'>
				{$file}
			</li>
		
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- Show_attachments --*/
function Show_attachments($data="") {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['Show_attachments'] ) )
{
$count_ee900301473c8cdae124d6f518c6497f = is_array($this->functionData['Show_attachments']) ? count($this->functionData['Show_attachments']) : 0;
$this->functionData['Show_attachments'][$count_ee900301473c8cdae124d6f518c6497f]['data'] = $data;
}
$IPBHTML .= "<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_id={$data['attach_id']}", "current",'' ), "", "" ) . "\" title=\"{$this->lang->words['attach_dl']}\"><img src=\"{$this->settings['public_dir']}" . (($data['mime_image']) ? ("{$data['mime_image']}") : ("style_extra/mime_types/unknown.gif")) . "\" alt=\"{$this->lang->words['attached_file']}\" /></a>
&nbsp;<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_id={$data['attach_id']}", "current",'' ), "", "" ) . "\" title=\"{$this->lang->words['attach_dl']}\"><strong>{$data['attach_file']}</strong></a> &nbsp;&nbsp;<span class='desc'><strong>{$data['file_size']}</strong></span>
&nbsp;&nbsp;<span class=\"desc lighter\">{$data['attach_hits']} {$this->lang->words['attach_hits']}</span>";
return $IPBHTML;
}

/* -- Show_attachments_img --*/
function Show_attachments_img($data=array()) {
$IPBHTML = "";
$IPBHTML .= "<a class='resized_img' rel='lightbox[{$data['attach_rel_id']}]' id='ipb-attach-url-{$data['_attach_id']}' href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['type']}&amp;attach_id={$data['attach_id']}", "current",'' ), "", "" ) . "\" title=\"{$data['location']} - {$this->lang->words['attach_size']} {$data['file_size']}, {$this->lang->words['attach_ahits']} {$data['attach_hits']}\"><img itemprop=\"image\" src=\"{$this->settings['upload_url']}/{$data['o_location']}\" class='bbc_img linked-image' alt=\"{$data['location']}\" /></a>
" . $this->registry->output->addMetaTag( 'og:image', "{$this->settings['upload_url']}/{$data['a_location']}", false ) . "";
return $IPBHTML;
}

/* -- Show_attachments_img_thumb --*/
function Show_attachments_img_thumb($data=array()) {
$IPBHTML = "";
$IPBHTML .= "<a class='resized_img' rel='lightbox[{$data['attach_rel_id']}]' id='ipb-attach-url-{$data['_attach_id']}' href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['type']}&amp;attach_id={$data['attach_id']}", "current",'' ), "", "" ) . "\" title=\"{$data['location']} - {$this->lang->words['attach_size']} {$data['file_size']}, {$this->lang->words['attach_ahits']} {$data['attach_hits']}\"><img itemprop=\"image\" src=\"{$this->settings['upload_url']}/{$data['t_location']}\" id='ipb-attach-img-{$data['_attach_id']}' style='width:{$data['t_width']};height:{$data['t_height']}' class='attach' width=\"{$data['t_width']}\" height=\"{$data['t_height']}\" alt=\"{$data['location']}\" /></a>
" . $this->registry->output->addMetaTag( 'og:image', "{$this->settings['upload_url']}/{$data['a_location']}", false ) . "";
return $IPBHTML;
}

/* -- softDeletedPostBit --*/
function softDeletedPostBit($post, $sdData, $topic) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['softDeletedPostBit'] ) )
{
$count_1e88bcc82dd2d61ca571277dfb655082 = is_array($this->functionData['softDeletedPostBit']) ? count($this->functionData['softDeletedPostBit']) : 0;
$this->functionData['softDeletedPostBit'][$count_1e88bcc82dd2d61ca571277dfb655082]['post'] = $post;
$this->functionData['softDeletedPostBit'][$count_1e88bcc82dd2d61ca571277dfb655082]['sdData'] = $sdData;
$this->functionData['softDeletedPostBit'][$count_1e88bcc82dd2d61ca571277dfb655082]['topic'] = $topic;
}

$_sD = $sdData[ $post['post']['pid'] ];
	$_sM = $_sD;
$IPBHTML .= "<div class='post_block hentry clear moderated' id='post_id_{$post['post']['pid']}'>
	<a id='entry{$post['post']['pid']}'></a>
	<div class='post_wrap'>
		" . (($post['author']['member_id']) ? ("
			<h3 class='row2'>
		") : ("
			<h3 class='row2 guest'>
		")) . "
			" . (($post['post']['moddable']) ? ("<span class='post_id right'>
					<a data-entry-pid='{$post['post']['pid']}' style='display:none'>#{$post['post']['post_count']}</a>
					<label for='checkbox_{$post['post']['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$post['post']['pid']}' name='selectedpids[]' value='{$post['post']['pid']}' class='post_mod'" . ((!empty( $post['post']['_pid_selected'] )) ? (" checked='checked'") : ("")) . " data-status='{$post['post']['queued']}' />
				</span>") : ("")) . "
				" . (($post['author']['member_id']) ? ("
						<span class=\"author vcard\">" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . "</span>
				") : ("
					" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post['author']) : '' ) . "
				")) . "
				" . (($post['post']['_show_ip']) ? ("<span class='ip right ipsType_small'>({$this->lang->words['ip']}:
					" . (($post['author']['g_access_cp']) ? ("
						<em>{$this->lang->words['ip_private']}</em>
					") : ("
						<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=modcp&amp;tab=iplookup&amp;fromapp=forums&amp;_do=submit&amp;ip={$post['post']['ip_address']}", "public",'' ), "", "" ) . "\" title='{$this->lang->words['info_about_this_ip']}'>{$post['post']['ip_address']}</a>
					")) . "
					)</span>") : ("")) . "
			</h3>
		<div class='post_body' id='postsDelete_{$post['post']['pid']}' style='margin-left: 0;'>
			<div class='post entry-content' style='padding:10px'>
				{$this->lang->words['post_deleted_by']} " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($_sD) : '' ) . " " . $this->registry->getClass('class_localization')->getDate($_sD['sdl_obj_date'],"long", 0) . ".
				" . (($post['post']['_softDeleteReason']) ? ("<p class='desc'>" . (($_sD['sdl_obj_reason']) ? ("{$_sD['sdl_obj_reason']}") : ("{$this->lang->words['no_reason_given']}")) . "</p>") : ("")) . "
			</div>
		</div>
		" . (($post['post']['_softDeleteContent']) ? ("<div id='postsDeleteShow_{$post['post']['pid']}' style='display:none'>
			<div class='author_info'>
				" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userInfoPane' ) ? $this->registry->getClass('output')->getTemplate('global')->userInfoPane($post['author'], $post['post']['pid'], array()) : '' ) . "
			</div>
			<div class='post_body'>
				<p class='posted_info'>
					{$this->lang->words['posted']} <abbr class=\"published\" title=\"" . @date( 'c', $post['post']['post_date'] ) . "\">" . $this->registry->getClass('class_localization')->getDate($post['post']['post_date'],"long", 0) . "</abbr>
				</p>
				<div class='post entry-content'>
					{$post['post']['post']}
					{$post['post']['attachmentHtml']}
					<br />
					" . (($post['post']['edit_by']) ? ("<p class='edit'>
							{$post['post']['edit_by']}
							" . (($post['post']['post_edit_reason'] != '') ? ("
								<br />
								<span class='reason'>{$post['post']['post_edit_reason']}</span>
							") : ("")) . "
						</p>") : ("")) . "
				</div>
				" . (($post['post']['signature']) ? ("
					{$post['post']['signature']}
				") : ("")) . "
			</div>
		</div>") : ("")) . "
		" . (($post['post']['_softDeleteContent'] OR $post['post']['_softDeleteRestore']) ? ("<ul class='post_controls clear clearfix'>
				" . (($post['post']['_can_delete']) ? ("
					<li>
						<a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=04&amp;f={$topic['forum_id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;pid={$post['post']['pid']}&amp;page={$this->request['page']}&amp;auth_key={$this->member->form_hash}&amp;nr=1", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_delete_title']}' class='sd_remove' onclick='if( !confirm(\"{$this->lang->words['post_delete_confirm']}\") ){ return false; }'>{$this->lang->words['post_delete']}</a>
					</li>
				") : ("")) . "" . (($post['post']['_softDeleteRestore'] AND !$topic['_isArchived']) ? ("
					<li class='post_toggle sd_restore' id='restoreContent_{$post['post']['pid']}'>
						<a class='ipsButton_secondary' href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=sundelete&amp;selectedpids[{$post['post']['pid']}]={$post['post']['pid']}&amp;pid={$post['post']['pid']}&amp;t={$topic['tid']}&amp;f={$topic['forum_id']}&amp;auth_key={$this->member->form_hash}&amp;nr=1", "public",'' ), "", "" ) . "'><span>{$this->lang->words['sdpost_restore']}</span></a>
					</li>
				") : ("")) . "" . (($post['post']['_softDeleteContent']) ? ("
					<li class='post_toggle sd_content' id='seeContent_{$post['post']['pid']}'>
						<a href='#'><span>{$this->lang->words['togglepostcontent']}</span></a>
					</li>
				") : ("")) . "
			</ul>") : ("")) . "
	</div>
</div>";
return $IPBHTML;
}

/* -- topicPreview --*/
function topicPreview($topic, $posts) {
$IPBHTML = "";
$IPBHTML .= "".$this->__f__299b3e72567ae853058e98ac07e3eb4a($topic,$posts)."<br class='clear' />
<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "' class='ipsButton'>{$this->lang->words['tg_gototopic']}</a>
" . ((! $topic['_lastRead'] OR $topic['_unreadPosts']) ? ("&nbsp;&nbsp;<span class='desc'>
		" . (($topic['_unreadPosts']) ? ("
			{$topic['_unreadPosts']} {$this->lang->words['newpoststp']}
			&middot; <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=getnewpost", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "'>{$this->lang->words['tg_go_last_post']}</a>
		") : ("")) . "
		<a data-clicklaunch=\"topicMarkRead\" data-tid=\"{$topic['tid']}\" href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=getnewpost", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "\">" . (($topic['_unreadPosts']) ? ("&middot; ") : ("")) . "{$this->lang->words['mark_topic_read']}</a>
	</span>") : ("")) . "";
return $IPBHTML;
}


function __f__299b3e72567ae853058e98ac07e3eb4a($topic, $posts)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $posts as $t => $post )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userSmallPhoto' ) ? $this->registry->getClass('output')->getTemplate('global')->userSmallPhoto(array_merge( $post, array( 'pp_small_photo' => $post['pp_thumb_photo'], '_customClass' => 'ipsUserPhoto_medium' ) )) : '' ) . "
	<div class='preview_col'>
		<p class='preview_info'>
			<strong>" . (($post['members_display_name']) ? ("" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userHoverCard' ) ? $this->registry->getClass('output')->getTemplate('global')->userHoverCard($post) : '' ) . "") : ("{$this->settings['guest_name_pre']}{$post['author_name']}{$this->settings['guest_name_suf']}")) . "</strong> " . (($t != 'search') ? ("{$this->lang->words['tg_madethe']} <a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;findpost={$post['pid']}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "\">{$this->lang->words['tg_'.$t]}</a>") : ("{$this->lang->words['tg_'.$t]}")) . "
		</p>
		{$post['post']}
	</div>
	<br class='clear' />

";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

/* -- topicViewTemplate --*/
function topicViewTemplate($forum, $topic, $post_data, $displayData) {
$IPBHTML = "";
if( IPSLib::locationHasHooks( 'skin_topic', $this->_funcHooks['topicViewTemplate'] ) )
{
$count_d5c8c8e33dee27de2c5929f6283bc365 = is_array($this->functionData['topicViewTemplate']) ? count($this->functionData['topicViewTemplate']) : 0;
$this->functionData['topicViewTemplate'][$count_d5c8c8e33dee27de2c5929f6283bc365]['forum'] = $forum;
$this->functionData['topicViewTemplate'][$count_d5c8c8e33dee27de2c5929f6283bc365]['topic'] = $topic;
$this->functionData['topicViewTemplate'][$count_d5c8c8e33dee27de2c5929f6283bc365]['post_data'] = $post_data;
$this->functionData['topicViewTemplate'][$count_d5c8c8e33dee27de2c5929f6283bc365]['displayData'] = $displayData;
}
$IPBHTML .= "" . (($forum['forum_allow_rating']) ? ("
" . $this->registry->getClass('output')->addJSModule("rating", "0" ) . "
") : ("")) . "
" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "
" . $this->registry->getClass('output')->addJSModule("editor", "0" ) . "
<script type=\"text/javascript\">
//<![CDATA[
	ipb.topic.inSection = 'topicview';
	ipb.topic.topic_id  = {$topic['tid']};
	ipb.topic.forum_id  = {$forum['id']};
	ipb.topic.start_id  = " . intval($this->request['st']) . ";
	// Editor JS: Only needs to be done once per page
	" . ( method_exists( $this->registry->getClass('output')->getTemplate('editors'), 'editorJS' ) ? $this->registry->getClass('output')->getTemplate('editors')->editorJS() : '' ) . "
	//Search Setup
	ipb.vars['search_type']			= 'forum';
	ipb.vars['search_type_id']		= {$forum['id']};
	ipb.vars['search_type_2']		= 'topic';
	ipb.vars['search_type_id_2']	= {$topic['tid']};
	
	// Delete stuff set up
	ipb.topic.deleteUrls['hardDelete'] = new Template(\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&section=moderate&do=04&f={$forum['id']}&t={$topic['tid']}&st={$this->request['st']}&auth_key={$this->member->form_hash}&p=#{pid}", "publicWithApp",'' ), "", "" ) . "\");
	ipb.topic.deleteUrls['softDelete'] = new Template(\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&module=moderate&section=moderate&do=postchoice&tact=sdelete&t={$topic['tid']}&f={$forum['id']}&auth_key={$this->member->form_hash}&selectedpids[#{pid}]=#{pid}&pid=#{pid}", "public",'' ), "", "" ) . "\");
//]]>
</script>
" . ((!$this->settings['disable_lightbox']) ? ("
" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'include_lightbox' ) ? $this->registry->getClass('output')->getTemplate('global')->include_lightbox() : '' ) . "
") : ("")) . "
" . (($forum['show_rules'] == 2) ? ("
<div class='message unspecific'>
<h3>{$forum['rules_title']}</h3>
{$forum['rules_text']}
</div>
") : ("")) . "
" . (($forum['show_rules'] == 1) ? ("
<div class='message unspecific'>
	<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=rules&amp;f={$forum['id']}", "public",'' ), "", "" ) . "' title='{$this->lang->words['show_forum_rules']}'><strong>{$forum['rules_title']}</strong></a>
</div>
") : ("")) . "
" . (($topic['_isDeleted']) ? ("<div class='message error'>
	<h3>{$this->lang->words['dlp_topic_has_deleted_title']}</h3>
	{$this->lang->words['dlp_topic_has_deleted_desc']}
	<div>
		" . (($topic['permissions']['TopicSoftDeleteRestore']) ? ("
			<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=moderate&amp;f={$forum['id']}&amp;t={$topic['tid']}&amp;st={$this->request['st']}&amp;auth_key={$this->member->form_hash}&amp;do=sundelete", "public",'' ), "", "" ) . "' title='{$this->lang->words['dl_ths_restore']}'>{$this->lang->words['dl_ths_restore']}</a>
		") : ("")) . "
		" . (($this->memberData['g_is_supmod'] == 1 || $this->memberData['forumsModeratorData'][ $forum['id'] ]['delete_topic']) ? ("
			&middot; <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=moderate&amp;f={$forum['id']}&amp;st={$this->request['st']}&amp;t={$topic['tid']}&amp;auth_key={$this->member->form_hash}&amp;do=03", "public",'' ), "", "" ) . "' title='{$this->lang->words['dl_ths_delete']}'>{$this->lang->words['dl_ths_delete']}</a>
		") : ("")) . "
	</div>
</div>
<br />") : ("")) . "
" . (($displayData['threaded_mode_enabled'] == 0) ? ("<div class='topic_controls'>
		{$topic['SHOW_PAGES']}
		<ul class='topic_buttons'>
			" . (($forum['_user_can_post']) ? ("
				<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}' accesskey='n'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
			") : ("
				<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
			")) . "
			" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
					" . (($topic['_poll_only']) ? ("" . (($displayData['reply_button']['url']) ? ("
							<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only_reply']}</a>
						") : ("
							<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only']}</span>
						")) . "") : ("" . (($displayData['reply_button']['url']) ? ("
							<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
						") : ("
							<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
						")) . "")) . "
				</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
						<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['topic_add_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("{$displayData['reply_button']['image']}_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
					")) . "") : ("")) . "")) . "
			" . (($this->memberData['member_id']) ? ("<li>
					" . (($this->settings['cpu_watch_update'] AND $topic['trackingTopic']) ? ("
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=forums&amp;area=updateWatchTopics&amp;do=saveIt&amp;authKey={$this->member->form_hash}&amp;topicIDs[{$topic['tid']}]=1&amp;trackchoice=unsubscribe&amp;topicReturn={$topic['tid']}&amp;st={$this->request['st']}", "public",'' ), "", "" ) . "' title='{$this->lang->words['topic_stop_watching']}'>" . $this->registry->getClass('output')->getReplacement("watch_topic_off") . "&nbsp;&nbsp;{$this->lang->words['topic_stop_watching']}</a>
					") : ("
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=forums&amp;area=watch&amp;watch=topic&amp;do=list&amp;tid={$topic['tid']}", "public",'' ), "", "" ) . "' title='{$this->lang->words['tt_title']}'>" . $this->registry->getClass('output')->getReplacement("watch_topic_on") . "&nbsp;&nbsp;{$this->lang->words['tt_title']}</a>
					")) . "
				</li>") : ("")) . "
		</ul>	
	</div>") : ("")) . "
<div class='topic hfeed mmod'>
	<h2 class='maintitle'>
		<span class='main_topic_title'>
			{$topic['title']}
			" . (($topic['description']) ? ("
				<span class='desc main_topic_desc'>{$topic['description']}</span>
			") : ("")) . "
		</span>
		" . (($forum['forum_allow_rating']) ? ("<span class='rating'>{$this->lang->words['js_rate_me']}
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=1&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='topic_rate_1' title='{$this->lang->words['top_js_1star']}'>" . (($topic['_rate_int'] >= 1) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=2&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='topic_rate_2' title='{$this->lang->words['top_js_2star']}'>" . (($topic['_rate_int'] >= 2) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=3&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='topic_rate_3' title='{$this->lang->words['top_js_3star']}'>" . (($topic['_rate_int'] >= 3) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=4&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='topic_rate_4' title='{$this->lang->words['top_js_4star']}'>" . (($topic['_rate_int'] >= 4) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=5&amp;secure_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' id='topic_rate_5' title='{$this->lang->words['top_js_5star']}'>" . (($topic['_rate_int'] >= 5) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a>
				<span id='rating_text'>
					" . (($topic['topic_rating_hits'] > 0) ? ("<span id='rating_hits'>{$topic['topic_rating_hits']}</span> {$this->lang->words['poll_s_votes']}") : ("")) . "
					" . (($topic['_rating_value'] != -1) ? (" ({$this->lang->words['topic_poll_your_vote']} <span id='your_rate'>{$topic['_rating_value']}</span>)") : ("")) . "
				</span>
				<script type='text/javascript'>
				//<![CDATA[
					rating = new ipb.rating( 'topic_rate_', { 
										url: '" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&module=ajax&section=topics&do=rateTopic&t={$topic['tid']}", "public",'' ), "", "" ) . "&md5check=' + ipb.vars['secure_hash'],
										cur_rating: {$topic['_rate_int']},
										rated: " . (($topic['_rating_value'] != -1) ? ("1") : ("0")) . ",
										allow_rate: {$topic['_allow_rate']},
										multi_rate: 1,
										show_rate_text: true
									  } );
				//]]>
				</script>
			</span>") : ("")) . "
	</h2>
	
	{$displayData['poll_data']}
	
	" . (($displayData['mod_links']) ? ("" . (($this->memberData['is_mod'] OR $this->memberData['member_id'] == $topic['starter_id']) ? ("
			<form id=\"modform\" method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\">
				<fieldset>
	 				<input type=\"hidden\" name=\"app\" value=\"forums\" />
		 			<input type=\"hidden\" name=\"module\" value=\"moderate\" />
		 			<input type=\"hidden\" name=\"section\" value=\"moderate\" />
		 			<input type=\"hidden\" name=\"do\" value=\"postchoice\" />
		 			<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
		 			<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
		 			<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
		 			<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
		 			<input type=\"hidden\" value=\"{$this->request['selectedpids']}\" name=\"selectedpidsJS\" id='selectedpidsJS' />
				</fieldset>
		") : ("")) . "") : ("")) . "
	
" . ((is_array( $post_data ) AND count( $post_data )) ? ("
<!-- skinnote: Posts by ignored users are not hidden, check _ignored -->
	".$this->__f__744eb292f6ac15fab7a794ab3a2009d9($forum,$topic,$post_data,$displayData)."") : ("")) . "
<!-- MOD LINKS -->
" . (($displayData['mod_links']) ? ("" . (($this->memberData['is_mod'] OR $this->memberData['member_id'] == $topic['starter_id']) ? ("<div id='topic_mod' class='moderation_bar rounded with_action clear'>
			" . (($this->memberData['is_mod']) ? ("<label for='tact' class='hide'>{$this->lang->words['post_moderation']}</label>
		 		<select name=\"tact\" id='tact' class='input_select'>
					<option value=\"\">{$this->lang->words['post_moderation']}</option>
	 				<option value=\"merge\">{$this->lang->words['cpt_merge']}</option>
	 				<option value=\"move\">{$this->lang->words['cpt_move']}</option>
	 				<option value=\"delete\">{$this->lang->words['cpt_delete']}</option>
	 				" . (($this->registry->class_forums->can_Un_SoftDeletePosts( $forum_data['id'], $topic )) ? ("<option value=\"sundelete\">{$this->lang->words['cpt_undelete']}</option>") : ("")) . "
	 				<option value=\"split\">{$this->lang->words['cpt_split']}</option>
	 				<option value=\"approve\">{$this->lang->words['cpt_approve']}</option>
	 				<option value=\"unapprove\">{$this->lang->words['cpt_unapprove']}</option>
	 			</select>&nbsp;
	 			<input type=\"submit\" id='mod_submit' name=\"gobutton\" value=\"{$this->lang->words['f_go']}" . (($this->request['selectedpidcount']) ? (" ({$this->request['selectedpidcount']})") : ("")) . "\" class=\"input_submit alt\" />") : ("")) . "
			</div>
		</form>
		<script type='text/javascript'>
			$('modform').observe('submit', ipb.topic.submitPostModeration );
		</script>
	
		<div id='topic_mod_2' class='moderation_bar rounded'>
			" . ((is_array( $displayData['multi_mod'] ) AND count( $displayData['multi_mod'] )) ? ("
				<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=multimod&amp;t={$topic['tid']}", "public",'' ), "", "" ) . "\" method=\"post\" id='multimod' class='left'>
					<fieldset>
						<input type=\"hidden\" name=\"check\" value=\"1\" />
						<select name=\"mm_id\" class=\"input_select\">
							<option value=\"-1\">{$this->lang->words['mm_title']}</option>
							".$this->__f__6b94d63daad9610689f7dc516d3209bc($forum,$topic,$post_data,$displayData)."						</select>&nbsp;
						<input type=\"submit\" value=\"{$this->lang->words['mm_submit']}\" class=\"input_submit alt\" />
					</fieldset>
				</form>
			") : ("")) . "
			<form method=\"post\" id=\"modform2\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\">
				<fieldset>
					<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
					<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
					<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
					<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
					<input type=\"hidden\" name=\"app\" value=\"forums\" />
					<input type=\"hidden\" name=\"module\" value=\"moderate\" />
					<input type=\"hidden\" name=\"section\" value=\"moderate\" />
					<label for='topic_moderation' class='hide'>{$this->lang->words['topic_moderation']}</label>
					<select name=\"do\" class=\"input_select\" id='topic_moderation'>
						<option value=\"-1\">{$this->lang->words['topic_moderation']}</option>
						".$this->__f__d559c2e5c19f9ac7ece95614cf10f415($forum,$topic,$post_data,$displayData)."						" . (($topic['topic_queuedposts'] AND $this->registry->class_forums->canQueuePosts( $forum['id'] )) ? ("
							<option value=\"p_approve\">" . sprintf( $this->lang->words['nmo_p_approve'], $topic['topic_queuedposts']) . "</option>
						") : ("")) . "" . (($topic['topic_queuedposts'] AND $this->registry->class_forums->canHardDeletePosts( $forum['id'], $topic )) ? ("
							<option value=\"p_delete_approve\">" . sprintf( $this->lang->words['nmo_p_delete_approve'], $topic['topic_queuedposts']) . "</option>
						") : ("")) . "" . (($topic['permissions']['softDeleteRestore'] AND $topic['topic_deleted_posts']) ? ("
							<option value=\"p_restore\">" . sprintf( $this->lang->words['nmo_p_restore'], $topic['topic_deleted_posts']) . "</option>
						") : ("")) . "" . (($topic['topic_deleted_posts'] AND $this->registry->class_forums->canHardDeletePosts( $forum['id'], $topic )) ? ("
							<option value=\"p_delete_softed\">" . sprintf( $this->lang->words['nmo_p_delete_softed'], $topic['topic_deleted_posts']) . "</option>
						") : ("")) . "
					</select>&nbsp;
					<input type=\"submit\" value=\"{$this->lang->words['jmp_go']}\" class=\"input_submit alt\" />
				</fieldset>
			</form>
			
			<script type='text/javascript'>
				$('modform2').observe('submit', ipb.topic.submitTopicModeration );
			</script>
		</div>") : ("")) . "") : ("")) . "
<!-- REPUTATION FILTERS -->
" . (($this->settings['reputation_enabled'] && $this->settings['reputation_show_content'] && $this->memberData['member_id'] != 0 && is_array($this->caches['reputation_levels'])) ? ("<div id='reputation_filter' class='filter_bar rounded'>
		<span id='show_filters' class='clickable' style='display: none'>{$this->lang->words['rep_f_currently']} " . (($this->memberData['_members_cache']['rep_filter'] && $this->memberData['_members_cache']['rep_filter'] === '*') ? ("{$this->lang->words['rep_f_viewing_all']} ") : ("{$this->lang->words['rep_f_hiding']} {$this->memberData['_members_cache']['rep_filter']} {$this->lang->words['rep_f_points']}.")) . " {$this->lang->words['rep_f_threshold']}</span>
		<form id='filter_form' method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\">
			<fieldset>
	 			<input type=\"hidden\" name=\"app\" value=\"forums\" />
		 		<input type=\"hidden\" name=\"module\" value=\"forums\" />
		 		<input type=\"hidden\" name=\"section\" value=\"topics\" />
		 		<input type=\"hidden\" name=\"rep_filter\" value=\"update\" />
		 		<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
		 		<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
		 		<input type=\"hidden\" name=\"secure_key\" value=\"{$this->member->form_hash}\" />
		 		<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
		 		<label for='rep_filter_select'>{$this->lang->words['rep_f_hide']}</label>
		 		<select name='rep_filter_set' id='rep_filter_select'>
		 			<option value='*' " . ((isset( $this->memberData['_members_cache']['rep_filter'] ) AND $this->memberData['_members_cache']['rep_filter'] == '*') ? (" selected='selected'") : ("")) . ">{$this->lang->words['rep_f_all_posts']}</option>
				" . ((is_array($this->caches['reputation_levels'])) ? ("
					".$this->__f__68fbb7946b126133fee2deaa8976081f($forum,$topic,$post_data,$displayData)."				") : ("")) . "
				</select>
	 		
				<input type=\"submit\" name=\"gobutton\" value=\"{$this->lang->words['rep_f_update']}\" class=\"input_submit alt\" />
			</fieldset>
		</form>
	</div>
	<script type='text/javascript'>
		$('show_filters').show();
	</script>") : ("")) . "
" . (($forum['FORUM_JUMP']) ? ("<div class='moderation_bar rounded' id='topic_search_jump'>
		" . (($forum['FORUM_JUMP']) ? ("
			{$forum['FORUM_JUMP']}
		") : ("")) . "
	</div>") : ("")) . "
<!-- THREADED MODE -->
" . (($displayData['threaded_mode_enabled'] == 1) ? ("<br />
	<div class='topic_controls'>
		{$topic['threaded_pages']}	
		<ul class='topic_buttons'>
			" . (($forum['_user_can_post']) ? ("
				<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
			") : ("
				<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
			")) . "
			" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
					" . (($displayData['reply_button']['url']) ? ("
						<a href='{$displayData['reply_button']['url']}'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
					") : ("
						<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
					")) . "
				</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
						<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['add_a_reply']}'>" . $this->registry->getClass('output')->getReplacement("reply_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
					")) . "") : ("")) . "")) . "
		</ul>
	</div>
	<h2 class='maintitle'>{$this->lang->words['threads']}</h2>
	<div class='generic_bar'></div>
	<div class='threaded_view general_box'>
	{$topic['_threaded_posts']}
	</div>
	<br class='clear' />{$topic['threaded_pages']}") : ("")) . "
<ul class='topic_jump right clear'>
	<li class='previous'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=old", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "'>{$this->lang->words['_larr']} {$this->lang->words['previous_topic']}</a></li>
	<li><strong><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$forum['id']}", "public",'' ), "{$forum['name_seo']}", "showforum" ) . "' title='{$this->lang->words['return_to']} {$forum['name']}'>{$forum['name']}</a></strong></li>
	<li class='next'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=new", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "'>{$this->lang->words['next_topic']} {$this->lang->words['_rarr']}</a></li>
</ul>
" . ((!$forum['disable_sharelinks'] AND $this->settings['sl_enable']) ? ("
<h3 class='topic_share left'>{$this->lang->words['topic_share']}</h3>
" . IPSLib::shareLinks( $topic['title'] ) . "
<br />
") : ("")) . "
<!-- BOTTOM BUTTONS -->
<div class='topic_controls clear'>
	{$topic['SHOW_PAGES']}
	
	<ul class='topic_buttons'>
		" . (($forum['_user_can_post']) ? ("
			<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
		") : ("
			<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
		")) . "
		
		" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
				" . (($topic['_poll_only']) ? ("" . (($displayData['reply_button']['url']) ? ("
						<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only_reply']}</a>
					") : ("
						<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only']}</span>
					")) . "") : ("" . (($displayData['reply_button']['url']) ? ("
						<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
					") : ("
						<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
					")) . "")) . "
			</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
					<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['topic_add_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("{$displayData['reply_button']['image']}_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
				") : ("
					<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
				")) . "") : ("")) . "")) . "
	</ul>
</div>
<hr />
<script type='text/javascript'>
	ipb.editor_values.set( 'emoticons', \$H({ " . IPSLib::fetchEmoticonsAsJson() . " }) );
	ipb.vars['emoticon_url'] = \"{$this->settings['emoticons_url']}\";
</script>
" . (($displayData['fast_reply'] != 'unavailable' && $displayData['reply_button']['url']) ? ("<br />
<div id='fast_reply' style='display: {$displayData['fast_reply']}'>
	<h3 class='maintitle'>{$this->lang->words['qr_title']}</h3>
	<div class='generic_bar'></div>
	<div class='general_box alt'>
		<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", "public",'' ), "", "" ) . "\" method=\"post\">
			<fieldset>
				<input type=\"hidden\" name=\"app\" value=\"forums\" />
				<input type=\"hidden\" name=\"module\" value=\"post\" />
				<input type=\"hidden\" name=\"section\" value=\"post\" />
				<input type=\"hidden\" name=\"do\" value=\"reply_post_do\" />
				<input type=\"hidden\" name=\"f\" value=\"{$forum['id']}\" />
				<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
				<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
				<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
				<input type=\"hidden\" name=\"fast_reply_used\" value=\"1\" />
				<input type=\"hidden\" name=\"enableemo\" value=\"yes\" />
				<input type=\"hidden\" name=\"enablesig\" value=\"yes\" />
				" . (($this->memberData['auto_track']) ? ("
					<input type=\"hidden\" name=\"enabletrack\" value=\"1\" />
				") : ("")) . "" . ((is_array($topic['_fastReplyStatusMessage']) AND count($topic['_fastReplyStatusMessage']) AND strlen($topic['_fastReplyStatusMessage'][0])) ? ("
					<div class='message'>" . implode( '<br />', $topic['_fastReplyStatusMessage']) . "</div>
				") : ("")) . "" . ( method_exists( $this->registry->getClass('output')->getTemplate('editors'), 'editorShell' ) ? $this->registry->getClass('output')->getTemplate('editors')->editorShell('fast-reply', 'Post', '', 1) : '' ) . "
			</fieldset>
			<fieldset class='submit'>
				<input type='submit' name=\"submit\" class='input_submit' value='{$this->lang->words['qr_post']}' tabindex='0' accesskey='s' id='submit_post' />&nbsp;&nbsp;<input type='submit' name=\"preview\" class='input_submit alt' value='{$this->lang->words['qr_more_opts']}' tabindex='0' id='full_compose' />
			</fieldset>
		</form>
	</div>
</div>
<script type=\"text/javascript\">
//<![CDATA[
	if( $('fast-reply_textarea') ){
		$('fast-reply_textarea').addClassName('unloaded_editor').setStyle('height: 70px');
		$('fast-reply_textarea').value = \"{$this->lang->words['editor_unloaded_atm']}\";
	}
	
	if( $('fast-reply_toolbar_1') ){
		$('fast-reply_toolbar_1').hide();
	}
	if( $('fast-reply_toolbar_2') ){
		$('fast-reply_toolbar_2').hide();
	}
	
	var removeTip = function(e){
		if( $('fast-reply_textarea').hasClassName('unloaded_editor') ){
			$('fast-reply_textarea').value='';
		}
	};
	
	$('full_compose').observe( 'click', removeTip );
	$('submit_post').observe( 'click', removeTip );
	
	in_use = 0;
	
	$('fast-reply_textarea').observe( 'focus', function(e){
		if( !in_use )
		{
			if( $('fast-reply_toolbar_1') ){
				$('fast-reply_toolbar_1').show();
			}
			if( $('fast-reply_toolbar_2') ){
				$('fast-reply_toolbar_2').show();
			}
			
			$('fast-reply_textarea').removeClassName('unloaded_editor').value = '';
			
			ipb.editors[ 'fast-reply' ] = new ipb.editor( 'fast-reply', USE_RTE );
			$( ipb.editors['fast-reply'] ).resize_to( 250 );
			
			try {
				ipb.editors[ 'fast-reply' ].editor_window.focus();
			} catch(err) { }
			in_use = 1;
		}
	});
//]]>
</script>") : ("")) . "
<!-- ACTIVE USERS -->
" . ((is_array( $displayData['active_users'] ) AND count( $displayData['active_users'] )) ? ("<div id='topic_stats' class='statistics general_box clear clearfix'>
		<div id='topic_active_users' class='active_users'>
			<h2>
				" . sprintf( $this->lang->words['active_users_title'], ($displayData['active_users']['members'] + $displayData['active_users']['guests'] + $displayData['active_users']['anon'] ) ) . "<br />
				<span class='desc'>" . sprintf( $this->lang->words['active_users_detail'], $displayData['active_users']['members'], $displayData['active_users']['guests'], $displayData['active_users']['anon'] ) . "</span>
			</h2>
			
			" . ((is_array( $displayData['active_users']['names'] ) AND count( $displayData['active_users']['names'] )) ? ("
				<ol>
					".$this->__f__c1cf54ed76c045da27246da55c9c1022($forum,$topic,$post_data,$displayData)."				</ol>
			") : ("")) . "
		</div>
	</div>") : ("")) . "

<!-- Close topic -->
</div>
<div id='delPopUp' style='display:none'>
	<h3 class='bar'>{$this->lang->words['dlp_title']}</h3>
	<div class='general_box'>
		<form action='#{removeUrl}' method='POST'>
			<strong>{$this->lang->words['dlp_remove_from_view']}</strong>
			<p class='desc'>{$this->lang->words['dlp_remove_from_view_desc']}</p>
			<p style='padding:4px 0px 4px 0px'>{$this->lang->words['dlp_reason']} <input type='text' name='deleteReason' id='delPop_reason' value='' style='width:65%' /> <input type='submit' class='input_submit' value='{$this->lang->words['dlp_remove']}' /></p>
		</form>
		<div style='#{permaDelete}padding-top:5px'>
			<strong>{$this->lang->words['dlp_delete_from_topic']}</strong>
			<p class='desc'>{$this->lang->words['dlp_delete_from_topic_desc']}</p>
			<p style='padding:4px 0px 4px 0px'><input type='button' class='input_submit' onclick=\"window.location='#{permaUrl}';\" value='{$this->lang->words['dlp_delete_now']}' /></p>
		</div>
	</div>
</div>

" . (($this->request['gopid']) ? ("
<script type='text/javascript'>
	var gopid = \"{$this->request['gopid']}\".replace(/&amp;/g, '');
	ipb.topic.scrollToPost( parseInt( gopid ) );
</script>
") : ("")) . "
" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'include_highlighter' ) ? $this->registry->getClass('output')->getTemplate('global')->include_highlighter(1) : '' ) . "";
return $IPBHTML;
}


function __f__744eb292f6ac15fab7a794ab3a2009d9($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $post_data as $post )
	{
		
$this->templateVars['canViewRep'] = "";
$this->__default__templateVars['canViewRep'] = "";
if ( $this->memberData['gbw_view_reps'] )
{
	$this->templateVars['canViewRep'] = "onclick='ipb.topic.repPopUp( this, {$post['post']['pid']} );'";
}
else {$this->templateVars['canViewRep'] = $this->__default__templateVars['canViewRep']; }

$this->templateVars['repClickable'] = "";
$this->__default__templateVars['repClickable'] = "";
if ( $this->memberData['gbw_view_reps'] )
{
	$this->templateVars['repClickable'] = " clickable";
}
else {$this->templateVars['repClickable'] = $this->__default__templateVars['repClickable']; }

		$__iteratorCount++;
		$_ips___x_retval .= "
		<!--Begin Msg Number {$post['post']['pid']}-->
		" . (($post['post']['_isDeleted'] AND $post['post']['_softDeleteSee']) ? ("
			" . ( method_exists( $this->registry->getClass('output')->getTemplate('topic'), 'softDeletedPostBit' ) ? $this->registry->getClass('output')->getTemplate('topic')->softDeletedPostBit($post, $displayData['sdData'], $topic) : '' ) . "
		") : ("")) . "
		" . ((! $post['post']['_isDeleted']) ? ("<div class='post_block hentry clear " . (($post['post']['_isHidden']) ? ("moderated") : ("")) . " " . (($this->settings['reputation_enabled']) ? ("with_rep") : ("")) . "' id='post_id_{$post['post']['pid']}'>
			<a id='entry{$post['post']['pid']}'></a>
			" . ((( isset( $post['post']['_repignored'] ) AND isset($post['post']['_ignored']) ) AND $post['post']['_repignored'] == 1 && $post['post']['_ignored'] != 1) ? ("<div class='post_ignore'>
					" . (($post['post']['rep_points'] == 0) ? ("
						<span class='reputation zero' title='{$this->lang->words['top_rep']}'>
					") : ("")) . "
					" . (($post['post']['rep_points'] > 0) ? ("
						<span class='reputation positive' title='{$this->lang->words['top_rep']}'>
					") : ("")) . "
					" . (($post['post']['rep_points'] < 0) ? ("
						<span class='reputation negative' title='{$this->lang->words['top_rep']}' >
					") : ("")) . "
							{$post['post']['rep_points']}</span> {$this->lang->words['top_this_post_by']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", "public",'' ), "", "" ) . "'>{$post['author']['members_display_name']}</a> " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'user_popup' ) ? $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) : '' ) . " {$this->lang->words['top_below_thresh']}. <a href='#' title='{$this->lang->words['ignore_view_post']}' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
				</div>") : ("")) . "
			
			" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("<div class='post_ignore'>
					" . (($post['post']['_repignored'] == 1) ? ("{$this->lang->words['post_ignored_rep']}") : ("{$this->lang->words['post_ignored']}")) . " <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", "public",'' ), "{$post['author']['members_seo_name']}", "showuser" ) . "'>{$post['author']['members_display_name']}</a> " . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'user_popup' ) ? $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) : '' ) . ". <a href='#entry{$post['post']['pid']}' title='{$this->lang->words['ignore_view_post']}' style='display: none' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
					" . (($this->settings['reputation_enabled'] AND $post['post']['_repignored'] == 1) ? ("<div><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}&amp;st={$this->request['st']}&amp;rep_filter_set=*&amp;rep_filter=update&amp;secure_key={$this->member->form_hash}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "\">{$this->lang->words['post_ignore_reset_rep']}</a></div>") : ("")) . "
				</div>") : ("")) . "
			<div class='post_wrap' " . (($post['post']['_ignored'] == 1 || $post['post']['_repignored'] == 1) ? ("style='display: none'") : ("")) . ">
				" . (($post['author']['member_id']) ? ("
					<h3>
				") : ("
					<h3 class='guest'>
				")) . "
						<span class='post_id'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}&amp;view=findpost&amp;p={$post['post']['pid']}", "public",'' ), "{$topic['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$this->lang->words['link_to_post']} #{$post['post']['post_count']}'>#{$post['post']['post_count']}</a></span>
						" . (($post['author']['member_id']) ? ("" . (($post['author']['_online']) ? ("
								" . $this->registry->getClass('output')->getReplacement("user_online") . "
							") : ("
								" . $this->registry->getClass('output')->getReplacement("user_offline") . "
							")) . " &nbsp;
								<span class=\"author vcard\"><a class=\"url fn\" href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", "public",'' ), "{$post['author']['members_seo_name']}", "showuser" ) . "'>{$post['author']['members_display_name']}</a>" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'user_popup' ) ? $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) : '' ) . "</span>") : ("
							{$post['author']['members_display_name']}
						")) . "
						" . (($post['post']['_show_ip']) ? ("<span class='ip'>({$this->lang->words['ip']}:
							" . (($post['author']['g_access_cp']) ? ("
								<em>{$this->lang->words['ip_private']}</em>
							") : ("
								<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=members&amp;area=mod_ipaddress&amp;do=custom&amp;ip={$post['post']['ip_address']}", "public",'' ), "", "" ) . "\" title='{$this->lang->words['info_about_this_ip']}'>{$post['post']['ip_address']}</a>
							")) . "
							)</span>") : ("")) . "
					</h3>
				<div class='author_info'>
					" . ( method_exists( $this->registry->getClass('output')->getTemplate('global'), 'userInfoPane' ) ? $this->registry->getClass('output')->getTemplate('global')->userInfoPane($post['author'], $post['post']['pid'], array()) : '' ) . "
				</div>
				<div class='post_body'>
					<p class='posted_info'>
						" . (($this->memberData['is_mod']) ? ("<label for='checkbox_{$post['post']['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$post['post']['pid']}' name='selectedpids[]' value='{$post['post']['pid']}' class='post_mod'" . ((isset( $post['post']['_pid_selected'] ) && $post['post']['_pid_selected']) ? (" checked='checked'") : ("")) . " />") : ("")) . "
						" . (($post['post']['icon_id']) ? ("
							<img src=\"{$this->settings['public_dir']}style_extra/post_icons/icon{$post['post']['icon_id']}.gif\" alt=\"{$this->lang->words['post_icon']}\" />&nbsp;
						") : ("")) . "
						{$this->lang->words['posted']} <abbr class=\"published\" title=\"" . date( 'c', $post['post']['post_date'] ) . "\">" . $this->registry->getClass('class_localization')->getDate($post['post']['post_date'],"long", 0) . "</abbr>
					</p>
					" . (($this->settings['reputation_highlight'] AND $post['post']['rep_points'] >= $this->settings['reputation_highlight']) ? ("<p class='rep_highlight'>" . $this->registry->getClass('output')->getReplacement("popular_post") . "<br />{$this->lang->words['popular_post']}</p>
						<!-- " . (($this->settings['reputation_highlight'] AND $post['post']['rep_points'] >= $this->settings['reputation_highlight']) ? ("rep_highlight") : ("")) . "  -->") : ("")) . "
					<div class='post entry-content " . (($post['post']['_repignored'] == 1) ? ("imgsize_ignore") : ("")) . "'>
						{$post['post']['post']}
						{$post['post']['attachmentHtml']}
						<br />
						" . (($post['post']['edit_by']) ? ("<p class='edit'>
								{$post['post']['edit_by']}
								" . (($post['post']['post_edit_reason'] != '') ? ("
									<br />
									<span class='reason'>{$this->lang->words['reason_for_edit']} {$post['post']['post_edit_reason']}</span>
								") : ("")) . "
							</p>") : ("")) . "
					</div>
					" . (($post['post']['signature']) ? ("
						{$post['post']['signature']}
					") : ("")) . "
				</div>
			" . (($this->settings['reputation_enabled']) ? ("" . ((!( $this->settings['reputation_protected_groups'] && in_array( $post['author']['member_group_id'], explode( ',', $this->settings['reputation_protected_groups'] ) ) )) ? ("<div class='rep_bar clear right' id='rep_post_{$post['post']['pid']}'>
				
												
				" . (($post['post']['rep_points'] == 0) ? ("
					<span class='reputation zero rep_show" . $this->templateVars["repClickable"] . "' title='{$this->lang->words['reputation']}' " . $this->templateVars["canViewRep"] . ">
				") : ("")) . "
				" . (($post['post']['rep_points'] > 0) ? ("
					<span class='reputation positive rep_show" . $this->templateVars["repClickable"] . "' title='{$this->lang->words['reputation']}' " . $this->templateVars["canViewRep"] . ">
				") : ("")) . "
				" . (($post['post']['rep_points'] < 0) ? ("
					<span class='reputation negative rep_show" . $this->templateVars["repClickable"] . "' title='{$this->lang->words['reputation']}' " . $this->templateVars["canViewRep"] . ">
				") : ("")) . "
						{$post['post']['rep_points']}
					</span>
					" . (($post['post']['has_given_rep'] != 1 AND $post['post']['has_given_rep'] != -1 AND $this->memberData['member_id'] != 0 && ( $this->settings['reputation_can_self_vote'] OR $post['author']['member_id'] != $this->memberData['member_id'] )) ? ("<ul>
						" . (($this->settings['reputation_point_types'] == 'positive' || $this->settings['reputation_point_types'] == 'both') ? ("
							<li><a href='{$this->settings['base_url']}app=core&amp;module=global&amp;section=reputation&amp;do=add_rating&amp;app_rate=forums&amp;type=pid&amp;type_id={$post['post']['pid']}&amp;rating=1&amp;secure_key={$this->member->form_hash}&amp;post_return={$post['post']['pid']}' class='rep_up' title='{$this->lang->words['reputation_up']}'>" . $this->registry->getClass('output')->getReplacement("rep_up") . "</a></li>
						") : ("")) . "
						" . (($this->settings['reputation_point_types'] == 'negative' || $this->settings['reputation_point_types'] == 'both') ? ("
							<li><a href='{$this->settings['base_url']}app=core&amp;module=global&amp;section=reputation&amp;do=add_rating&amp;app_rate=forums&amp;type=pid&amp;type_id={$post['post']['pid']}&amp;rating=-1&amp;secure_key={$this->member->form_hash}&amp;post_return={$post['post']['pid']}' class='rep_down' title='{$this->lang->words['reputation_down']}'>" . $this->registry->getClass('output')->getReplacement("rep_down") . "</a></li>
						") : ("")) . "
						</ul>") : ("")) . "
				</div>") : ("")) . "
				<script type='text/javascript'>
					ipb.global.registerReputation( 'rep_post_{$post['post']['pid']}', { app: 'forums', type: 'pid', typeid: '{$post['post']['pid']}' }, parseInt('{$post['post']['rep_points']}') );
				</script>") : ("")) . "
				<ul class='post_controls'>
					" . ((($this->settings['disable_reportpost'] != 1) and ( $this->memberData['member_id'] )) ? ("<li class='report'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;rcom=post&amp;tid={$this->request['t']}&amp;pid={$post['post']['pid']}&amp;st={$this->request['st']}", "public",'' ), "", "" ) . "'>" . $this->registry->getClass('output')->getReplacement("report_post_icon") . " {$this->lang->words['report']}</a>
						</li>
						" . (($this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
							<li class='report'>
								<a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\" id='post-report-{$post['post']['pid']}' class='ipbmenu'> <span id=\"rstat-{$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}\"><img src=\"{$this->settings['img_url']}/reports/post_alert_{$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['gfx']}.png\" alt=\"\" /></span> </a>
							</li>
						") : ("")) . "") : ("")) . "
					" . (($this->settings['blog_allow_bthis'] AND $this->memberData['has_blog'] AND IPSLib::appIsInstalled( 'blog' ) AND $displayData['reply_button']['url']) ? ("
						<li class='right'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;blog_this=forums&amp;id1={$this->request['t']}&amp;id2={$post['post']['pid']}", "public",'' ), "", "" ) . "'>" . $this->registry->getClass('output')->getReplacement("blog_link") . " {$this->lang->words['blog_this']}</a>
						</li>
					") : ("")) . "
					<li class='top hide'><a href='#top' class='top' title='{$this->lang->words['back_top']}'>{$this->lang->words['back_top']} of the page up there ^</a></li>
					
					" . (($displayData['reply_button']['image']) ? ("" . ((isset( $post['post']['_mq_selected'] ) && $post['post']['_mq_selected']) ? ("
							<li class='selected multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
						") : ("
							<li class='multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
						")) . "
						<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", "publicWithApp",'' ), "", "" ) . "\" title=\"{$this->lang->words['quote_with_mq']}\">" . $this->registry->getClass('output')->getReplacement("mq_post_icon") . " {$this->lang->words['mq']}</a>
						</li>
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", "publicWithApp",'' ), "", "" ) . "\" title=\"{$this->lang->words['tt_reply_to_post']}\">" . $this->registry->getClass('output')->getReplacement("reply_post_icon") . " {$this->lang->words['post_reply']}</a></li>") : ("")) . "
					" . (($post['post']['_can_edit'] === TRUE) ? ("
						<li class='post_edit'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=edit_post&amp;f={$forum['id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;st={$this->request['st']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_edit_title']}' class='edit_post' id='edit_post_{$post['post']['pid']}'>" . $this->registry->getClass('output')->getReplacement("edit_post_icon") . " {$this->lang->words['post_edit']}</a></li>
					") : ("")) . "
					" . (($post['post']['_can_delete'] === TRUE OR $post['post']['_softDelete']) ? ("
						<li class='post_del' id='del_post_{$post['post']['pid']}'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=04&amp;f={$forum['id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;st={$this->request['st']}&amp;auth_key={$this->member->form_hash}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['post_delete_title']}' class='delete_post'>" . $this->registry->getClass('output')->getReplacement("delete_post_icon") . " {$this->lang->words['post_delete']}</a>
						</li>
					") : ("")) . "
					<!-- Matt: Approve / unapprove post button -->
					" . (($this->memberData['is_mod']) ? ("<li class='post_toggle toggle_post' id='toggle_post_{$post['post']['pid']}' style='display: none'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=moderate&amp;do=postchoice&amp;tact=unapprove&amp;selectedpids[{$post['post']['pid']}]={$post['post']['pid']}&amp;t={$topic['tid']}&amp;f={$forum['id']}&amp;auth_key={$this->member->form_hash}", "public",'' ), "", "" ) . "' title='{$this->lang->words['post_toggle_visible']}'>" . (($post['post']['queued']==1) ? ("" . $this->registry->getClass('output')->getReplacement("approve") . "") : ("" . $this->registry->getClass('output')->getReplacement("deny") . "")) . " <span id='toggletext_post_{$post['post']['pid']}'>" . (($post['post']['queued']==1) ? ("{$this->lang->words['post_approve']}") : ("{$this->lang->words['post_unapprove']}")) . "</span></a>
						</li>") : ("")) . "
				</ul>
				<script type='text/javascript'>
					// Show multiquote for JS browsers
					$('multiq_{$post['post']['pid']}').show();
					
					if( $('toggle_post_{$post['post']['pid']}') )
					{
						$('toggle_post_{$post['post']['pid']}').show();
					}
					
					// Add perm data
					ipb.topic.deletePerms[{$post['post']['pid']}] = { 'canDelete' : " . intval($post['post']['_can_delete']) . ", 'canSoftDelete' : " . intval($post['post']['_softDelete']) . " };
				</script>
				" . (($this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
					<ul id='post-report-{$post['post']['pid']}_menucontent' class='ipbmenu_content report_menu'>
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}", "public",'' ), "", "" ) . "\" id='report_mark_{$post['post']['pid']}'><img src='{$this->settings['img_url']}/reports/mark_complete.png' alt='' /> {$this->lang->words['report_menu_mark_complete']}</a></li>
						<li><a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\"><img src='{$this->settings['img_url']}/reports/view_report.png' alt='' /> {$this->lang->words['report_menu_view_report']}</a></li>
					</ul>
					<script type=\"text/javascript\">
						$('report_mark_{$post['post']['pid']}').observe('click',
						 	ipb.global.updateReportStatus.bindAsEventListener( 	
								this, {$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']},2,2
							)
						);
					</script>
				") : ("")) . "
			</div>		
		</div>") : ("")) . "
		
		" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("
			<script type='text/javascript'>
				ipb.topic.setPostHidden( {$post['post']['pid']} );
				$('unhide_post_{$post['post']['pid']}').show();
			</script>
		") : ("")) . "
		<hr />
		
		" . (($post['post']['_adCode']) ? ("
			{$post['post']['_adCode']}
		") : ("")) . "
		" . (($post['post']['_end_first_post']) ? ("<!-- END OF FIRST POST IN LINEAR+, SHOW BUTTONS AND NEW TITLE -->
			<br />
			<div class='topic_controls'>
				{$topic['SHOW_PAGES']}
				<ul class='topic_buttons'>
					" . (($forum['_user_can_post']) ? ("
						<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", "publicWithApp",'' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}' accesskey='n'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
					")) . "
					" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
							" . (($topic['_poll_only']) ? ("" . (($displayData['reply_button']['url']) ? ("
									<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only_reply']}</a>
								") : ("
									<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_poll_only']}</span>
								")) . "") : ("" . (($displayData['reply_button']['url']) ? ("
									<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
								") : ("
									<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
								")) . "")) . "
						</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
								<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['topic_add_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("{$displayData['reply_button']['image']}_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
							") : ("
								<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
							")) . "") : ("")) . "")) . "
				</ul>
			</div>
			<h2 class='maintitle'>{$this->lang->words['topic_other_replies']}</h2>
			<div class='generic_bar'></div>") : ("")) . "
	
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__6b94d63daad9610689f7dc516d3209bc($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $displayData['multi_mod'] as $mm_data )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
								<option value=\"{$mm_data[0]}\">{$mm_data[1]}</option>
							
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__d559c2e5c19f9ac7ece95614cf10f415($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $displayData['mod_links'] as $_mod_link )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
							<option value=\"{$_mod_link['option']}\">-{$_mod_link['value']}</option>
						
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__68fbb7946b126133fee2deaa8976081f($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $this->caches['reputation_levels'] as $k => $v )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
					<option value='{$v['level_points']}'" . ((isset( $this->memberData['_members_cache']['rep_filter'] ) AND $v['level_points'] == $this->memberData['_members_cache']['rep_filter']) ? (" selected='selected'") : ("")) . ">{$v['level_points']} {$this->lang->words['rep_f_points']}</option>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}

function __f__c1cf54ed76c045da27246da55c9c1022($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	$__iteratorCount = 0;
	foreach( $displayData['active_users']['names'] as $p => $r )
	{
		
		$__iteratorCount++;
		$_ips___x_retval .= "
				<li>{$r['p_start']}" . (($r['id']) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['id']}", "public",'' ), "{$r['seo']}", "showuser" ) . "' title='{$r['p_title']}'>") : ("")) . "{$r['name']}" . (($r['id']) ? ("</a>") : ("")) . "{$r['p_end']}" . (($p + 1 != count( $displayData['active_users']['names'] )) ? (",") : ("")) . "</li>
					
";
	}
	$_ips___x_retval .= '';
	unset( $__iteratorCount );
	return $_ips___x_retval;
}


}


/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>